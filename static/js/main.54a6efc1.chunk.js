(this["webpackJsonpicecream-order"]=this["webpackJsonpicecream-order"]||[]).push([[0],{72:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a(1),c=a.n(n),s=a(24),i=a.n(s);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var o=a(11),l=a(17),u=a(44),d=a(9),j=a(43),b=Object(j.a)(),m=a(3),p="ICECREAM_INIT",O="ICECREAM_ADD",h="ICECREAM_REMOVE",x="ICECREAM_SET",f="ICECREAM_FETCH_FAIL",v="SUMMARY_OPEN",_="SUMMARY_CLOSE",g="ORDER_POST",y="ORDER_POST_START",N="ORDER_POST_SUCCESS",E="ORDER_POST_FAIL",k="ORDER_GET",T="ORDER_GET_START",w="ORDER_GET_SUCCESS",I="ORDER_GET_FAIL",S="AUTH",C="AUTH_START",A="AUTH_SUCCESS",R="AUTH_FAIL",D="AUTH_INITIATE_LOGOUT",P="AUTH_LOGOUT",L="AUTH_CHECK_TIMEOUT",U="AUTH_CHECK_ON_START",M={token:null,userId:null,error:null,loading:!1},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case C:return Object(m.a)(Object(m.a)({},e),{},{error:null,loading:!0});case R:return Object(m.a)(Object(m.a)({},e),{},{error:t.error,loading:!1});case A:return Object(m.a)(Object(m.a)({},e),{},{token:t.token,userId:t.id,error:null,loading:!1});case P:return Object(m.a)(Object(m.a)({},e),{},{token:null,userId:null});default:return e}},q=a(15),F={icecreams:{},cart:{},totalPrice:0,fetchError:!1,summaryType:!1},z=function(e,t){var a=t.icecreamName,r=t.icecreamSize,n=t.icecreamPrice;return Object(m.a)(Object(m.a)({},e),{},{cart:Object(m.a)(Object(m.a)({},e.cart),{},Object(q.a)({},a,Object(m.a)(Object(m.a)({},e.cart[a]),{},Object(q.a)({},r,e.cart[a][r]+1)))),totalPrice:e.totalPrice+n})},G=function(e,t){var a=t.icecreamName,r=t.icecreamSize,n=t.icecreamPrice;return Object(m.a)(Object(m.a)({},e),{},{cart:Object(m.a)(Object(m.a)({},e.cart),{},Object(q.a)({},a,Object(m.a)(Object(m.a)({},e.cart[a]),{},Object(q.a)({},r,e.cart[a][r]-1)))),totalPrice:e.totalPrice-n})},Y=function(e,t){var a=Object.values(t.icecream),r={};for(var n in a){var c=a[n].shortname,s=a[n].variation;for(var i in s){var o=s[i];r[c]=Object(m.a)(Object(m.a)({},r[c]),{},Object(q.a)({},o.type,0))}}return Object(m.a)(Object(m.a)({},e),{},{icecreams:t.icecream,cart:r,totalPrice:F.totalPrice,fetchError:!1})},B=function(e,t){return Object(m.a)(Object(m.a)({},e),{},{icecreams:{},cart:{},totalPrice:0,fetchError:!0})},W=function(e,t){return Object(m.a)(Object(m.a)({},e),{},{summaryType:!e.summaryType})},$=function(e,t){return Object(m.a)(Object(m.a)({},e),{},{summaryType:!1})},V=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:F,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case O:return z(e,t);case h:return G(e,t);case x:return Y(e,t);case f:return B(e);case v:return W(e);case _:return $(e);default:return e}},K={postError:null,postLoading:!1,getError:null,getLoading:!1,userOrders:{}},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(m.a)(Object(m.a)({},e),{},{postError:null,postLoading:!0});case N:return Object(m.a)(Object(m.a)({},e),{},{postLoading:!1,postError:null});case E:return Object(m.a)(Object(m.a)({},e),{},{postLoading:!1,postError:t.error});case T:return Object(m.a)(Object(m.a)({},e),{},{getError:null,getLoading:!0});case w:return Object(m.a)(Object(m.a)({},e),{},{getError:null,getLoading:!1,userOrders:t.data});case I:return Object(m.a)(Object(m.a)({},e),{},{getError:t.error,getLoading:!1,userOrders:K.userOrders});default:return e}},X=a(8),J=a.n(X),Q=a(7),ee=a(27),te=a.n(ee),ae=function(e,t){return{type:A,token:e,id:t}},re=function(){return{type:D}},ne=function(e){return{type:L,time:e}},ce=J.a.mark(le),se=J.a.mark(ue),ie=J.a.mark(de),oe=J.a.mark(je);function le(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,localStorage.removeItem("token");case 2:return e.next=4,localStorage.removeItem("userId");case 4:return e.next=6,localStorage.removeItem("expiresDate");case 6:return e.next=8,Object(Q.b)({type:P});case 8:case"end":return e.stop()}}),ce)}function ue(e){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Q.a)(1e3*e.time);case 2:return t.next=4,Object(Q.b)(re());case 4:case"end":return t.stop()}}),se)}function de(e){var t,a,r,n;return J.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,Object(Q.b)({type:C});case 2:return t={email:e.email,password:e.pass,returnSecureToken:!0},a="https://identitytoolkit.googleapis.com/v1/accounts:signUp?key=AIzaSyBZpy3lK4ItxEbC_zDOWRhRjIwEneEhRA8",e.formType&&(a="https://identitytoolkit.googleapis.com/v1/accounts:signInWithPassword?key=AIzaSyBZpy3lK4ItxEbC_zDOWRhRjIwEneEhRA8"),c.prev=5,c.next=8,te.a.post(a,t);case 8:return r=c.sent,c.next=11,new Date((new Date).getTime()+1e3*r.data.expiresIn);case 11:return n=c.sent,c.next=14,localStorage.setItem("token",r.data.idToken);case 14:return c.next=16,localStorage.setItem("userId",r.data.localId);case 16:return c.next=18,localStorage.setItem("expiresDate",n);case 18:return c.next=20,Object(Q.b)(ae(r.data.idToken,r.data.localId));case 20:return c.next=22,Object(Q.b)(ne(r.data.expiresIn));case 22:c.next=28;break;case 24:return c.prev=24,c.t0=c.catch(5),c.next=28,Object(Q.b)((s=c.t0.response.data.error,{type:R,error:s}));case 28:case"end":return c.stop()}var s}),ie,null,[[5,24]])}function je(){var e,t,a;return J.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,localStorage.getItem("token");case 2:if(e=r.sent){r.next=8;break}return r.next=6,Object(Q.b)(re());case 6:r.next=23;break;case 8:return r.next=10,new Date(localStorage.getItem("expiresDate"));case 10:return t=r.sent,r.next=13,localStorage.getItem("userId");case 13:if(a=r.sent,!(t<=new Date)){r.next=19;break}return r.next=17,Object(Q.b)(re());case 17:r.next=23;break;case 19:return r.next=21,Object(Q.b)(ae(e,a));case 21:return r.next=23,Object(Q.b)(ne((t.getTime()-(new Date).getTime())/1e3));case 23:case"end":return r.stop()}}),oe)}var be=te.a.create({baseURL:"https://icecream-orders.firebaseio.com/"}),me=J.a.mark(pe);function pe(e){var t;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,be.get("icecreams.json?auth=".concat(e.token));case 3:return t=a.sent,a.next=6,Object(Q.b)((r=t.data,{type:x,icecream:r}));case 6:a.next=12;break;case 8:return a.prev=8,a.t0=a.catch(0),a.next=12,Object(Q.b)({type:f});case 12:case"end":return a.stop()}var r}),me,null,[[0,8]])}var Oe=J.a.mark(xe),he=J.a.mark(fe);function xe(e){return J.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(Q.b)({type:y});case 2:return t.prev=2,t.next=5,be.post("/orders.json?auth=".concat(e.token),e.order);case 5:return t.next=7,Object(Q.b)({type:N});case 7:b.push("/thank-you"),t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(2),t.next=14,Object(Q.b)((a=t.t0.response,{type:E,error:a}));case 14:case"end":return t.stop()}var a}),Oe,null,[[2,10]])}function fe(e){var t;return J.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(Q.b)({type:T});case 2:return a.prev=2,a.next=5,be.get("/orders.json?auth=".concat(e.token,'&orderBy="userId"&equalTo="').concat(e.userId,'"'));case 5:return t=a.sent,a.next=8,Object(Q.b)((n=t.data,{type:w,data:n}));case 8:a.next=14;break;case 10:return a.prev=10,a.t0=a.catch(2),a.next=14,Object(Q.b)((r=a.t0.response,{type:I,error:r}));case 14:case"end":return a.stop()}var r,n}),he,null,[[2,10]])}var ve=J.a.mark(ye),_e=J.a.mark(Ne),ge=J.a.mark(Ee);function ye(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.c)(L,ue);case 2:return e.next=4,Object(Q.c)(D,le);case 4:return e.next=6,Object(Q.c)(S,de);case 6:return e.next=8,Object(Q.c)(U,je);case 8:case"end":return e.stop()}}),ve)}function Ne(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.c)(p,pe);case 2:case"end":return e.stop()}}),_e)}function Ee(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Q.d)(g,xe);case 2:return e.next=4,Object(Q.c)(k,fe);case 4:case"end":return e.stop()}}),ge)}var ke=a(13),Te=a(10),we=(a(72),a.p+"static/media/example-logo.2c3a0d47.png"),Ie=a.p+"static/media/i-cart.393d2d72.svg",Se=a.p+"static/media/i-user.8cab7b59.svg",Ce=a.p+"static/media/i-orders-list.ef69039a.svg",Ae=a.p+"static/media/i-exit.98d53023.svg",Re=Object(o.b)((function(e){return{summaryType:e.ic.summaryType,token:e.auth.token,cart:e.ic.cart}}),(function(e){return{toggleSummary:function(){return e({type:v,summaryType:t});var t}}}))((function(e){var t=Object(n.useState)(0),a=Object(ke.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(null),o=Object(ke.a)(i,2),l=o[0],u=o[1],j=Object(d.g)().pathname,b=e.cart,m=e.token,p=e.toggleSummary;Object(n.useEffect)((function(){u("/"===j||"/checkout"===j?Object(r.jsxs)("div",{className:"topbar__icon topbar__cart",onClick:p,children:[Object(r.jsx)("img",{src:Ie,alt:"Cart"}),c>0&&Object(r.jsx)("span",{className:"topbar__cart-quantity",children:c})]}):Object(r.jsx)("div",{className:"topbar__icon topbar__cart",children:Object(r.jsx)(Te.a,{to:"/",children:Object(r.jsx)("img",{src:Ie,alt:"Products"})})}))}),[j,u,c,p]),Object(n.useEffect)((function(){var e=0;for(var t in b){var a=b[t];for(var r in b[t]){e+=a[r]}s(e)}}),[b]);var O=m?Object(r.jsx)(Te.a,{to:"/logout",children:Object(r.jsx)("img",{src:Ae,alt:"Logout"})}):Object(r.jsx)(Te.a,{to:"/auth",children:Object(r.jsx)("img",{src:Se,alt:"Login"})});return Object(r.jsx)("header",{className:"topbar",children:Object(r.jsx)("div",{className:"topbar__inner",children:Object(r.jsxs)("div",{className:"topbar__wrap",children:[Object(r.jsx)(Te.a,{to:"/",className:"topbar__logo",children:Object(r.jsx)("img",{src:we,alt:"Logo"})}),Object(r.jsxs)("div",{className:"topbar__icons",children:[Object(r.jsx)("div",{className:"topbar__icon topbar__auth",children:O}),m&&Object(r.jsx)("div",{className:"topbar__icon topbar__user",children:Object(r.jsx)(Te.a,{to:"/orders",children:Object(r.jsx)("img",{src:Ce,alt:"Orders"})})}),l]})]})})})})),De=function(e){return Object(r.jsxs)(n.Fragment,{children:[null!==e.isAuth?Object(r.jsx)(Re,{}):"",Object(r.jsx)("main",{className:"main",children:e.children})]})},Pe=(a(74),a.p+"static/media/plus-1.3570cd54.svg"),Le=a.p+"static/media/minus-1.4ce538bf.svg",Ue=Object(o.b)(null,(function(e){return{onIcecreamAdd:function(t,a,r){return e(function(e,t,a){return{type:O,icecreamName:e,icecreamSize:t,icecreamPrice:a}}(t,a,r))},onIcecreamRemove:function(t,a,r){return e(function(e,t,a){return{type:h,icecreamName:e,icecreamSize:t,icecreamPrice:a}}(t,a,r))}}}))((function(e){var t=e.image,a=e.fullname,n=e.shortname,c=e.cart,s=e.variations,i=e.onIcecreamRemove,o=e.onIcecreamAdd;return Object(r.jsxs)("div",{className:"s-box",children:[Object(r.jsx)("div",{className:"s-box__image",children:Object(r.jsx)("img",{src:t,alt:"Icecream Box"})}),Object(r.jsxs)("div",{className:"s-box__content",children:[Object(r.jsx)("p",{className:"s-box__name",children:a}),s.map((function(e){var t=e.type,a=e.price;return Object(r.jsxs)("div",{className:"s-box__item",children:[Object(r.jsxs)("div",{className:"s-box__col",children:[Object(r.jsxs)("p",{className:"s-box__type",children:["Size: ",Object(r.jsx)("strong",{children:t})]}),Object(r.jsxs)("p",{className:"s-box__price",children:[a.toFixed(2)," $"]})]}),Object(r.jsxs)("div",{className:"s-box__col s-box__col--buttons",children:[Object(r.jsx)("button",{onClick:function(){return i(n,t,a)},disabled:c[t]<=0,className:"s-box__btn",children:Object(r.jsx)("img",{src:Le,alt:"Decrement"})}),Object(r.jsx)("button",{onClick:function(){return o(n,t,a)},className:"s-box__btn",children:Object(r.jsx)("img",{src:Pe,alt:"Increment"})})]})]},t)}))]})]})}));a(75);var Me=function(){return Object(r.jsx)("div",{className:"loader",children:Object(r.jsxs)("div",{className:"loader__spinner",children:[Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{}),Object(r.jsx)("div",{})]})})},He=a.p+"static/media/prod1.fd047d0c.jpg",qe=a.p+"static/media/prod2.fd2afd15.jpg",Fe=a.p+"static/media/prod3.be71dbd0.jpg",ze=(a(76),function(e){var t=e.prices,a=e.cart,n=e.purchasable,c=e.fetchError,s=Object.getOwnPropertyNames(e.icecreams),i=Object(r.jsx)(Me,{});s.length>=1&&(i=Object.values(e.icecreams).map((function(e){return e})).map((function(e,n){return Object(r.jsx)(Ue,{prices:t,fullname:e.fullname,shortname:e.shortname,variations:e.variation,cart:a[e.shortname],image:n%2?He:n%3?Fe:qe},e.shortname)})));return 0===s.length&&c&&(i=Object(r.jsx)("p",{className:"m-boxes__error",children:"Ouch! Something went wrong"})),Object(r.jsxs)("div",{className:"m-boxes",children:[Object(r.jsx)("div",{className:"m-boxes__wrap",children:i}),Object(r.jsx)("div",{className:"m-boxes__link",children:n&&Object(r.jsx)(Te.a,{to:"/checkout",className:"m-boxes__btn",children:"Checkout"})})]})}),Ge=(a(77),function(e){var t=e.name,a=e.size,n=e.value,c=e.price;return Object(r.jsxs)("li",{className:"summary-item",children:[Object(r.jsxs)("p",{className:"summary-item__name",children:[Object(r.jsx)("strong",{children:t}),a]}),Object(r.jsxs)("span",{className:"summary-item__wrap",children:[Object(r.jsxs)("p",{className:"summary-item__value",children:[n," x ",c.toFixed(2)," $"]}),Object(r.jsxs)("p",{className:"summary-item__price",children:[(n*c).toFixed(2)," $"]})]})]})}),Ye=(a(78),Object(o.b)((function(e){return{icecreams:e.ic.icecreams,cart:e.ic.cart,totalPrice:e.ic.totalPrice,summaryType:e.ic.summaryType}}),null)((function(e){var t=e.cart,a=e.icecreams,n=e.summaryType,c=e.pagePath,s=e.purchasable,i=e.totalPrice,o=[],l=null,u=["summary"];!0===n&&u.push("summary--mobile");var d=Object(r.jsx)("div",{className:"summary__info",children:Object(r.jsx)("p",{children:"Your cart is empty"})});l=c?Object(r.jsx)(Te.a,{to:"/checkout",className:"summary__btn",children:"Checkout"}):Object(r.jsx)(Te.a,{to:"/",className:"summary__btn",children:"Back to order"});var j=Object.keys(t).map((function(e){var n=a[e].variation,c=a[e].fullname,s=a[e].shortname,i=t[e];for(var l in n){var u=n[l];o[s]=Object(m.a)(Object(m.a)({},o[s]),{},Object(q.a)({},u.type,u.price))}return Object.keys(i).map((function(e){var t=o[s][e],n=i[e];return 0!==n&&Object(r.jsx)(Ge,{name:c,shortName:s,size:e,ic:a,price:t,value:n},s+e)}))}));return Object(r.jsxs)("div",{className:u.join(" "),children:[Object(r.jsx)("h2",{className:"summary__title",children:"Your Order"}),!s&&d,Object(r.jsx)("ol",{className:"summary__list",children:j}),s&&Object(r.jsxs)("div",{className:"summary__footer",children:[Object(r.jsxs)("div",{className:"summary__cart",children:[Object(r.jsx)("p",{className:"summary__cart-text",children:"Summary:"}),Object(r.jsxs)("p",{className:"summary__cart-text summary__cart-text--value",children:[i.toFixed(2)," $"]})]}),Object(r.jsx)("div",{className:"summary__btn-wrap",children:l})]})]})}))),Be=function(){var e=Object(n.useState)(!1),t=Object(ke.a)(e,2),a=t[0],r=t[1];return{formIsValid:a,inputChangedHandler:function(e,t,a){var n=Object(m.a)({},e),c=Object(m.a)({},n[a]);c.value=t.target.value,c.valid=function(e,t){var a=!0;return t.required&&(a=""!==e.trim()&&a),"postal"===t.regex&&(a=e.match(/\d{2}-\d{3}/g)&&a),"tel"===t.regex&&(e.replace(/\s/g,""),a=e.match(/(\(?(\+|00)?48\)?)?[ -]?\d{3}[ -]?\d{3}[ -]?\d{3}(?!\w)/g)&&a),"email"===t.regex&&(a=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())),t.minLength&&(a=e.length>=t.minLength&&a),t.maxLength&&(a=e.length===t.maxLength&&a),a}(c.value,c.validation),c.touched=!0,n[a]=c;var s=!0;for(var i in n)s=n[i].valid&&s;return r(s),n}}},We=(a(79),function(e){var t=e.name,a=e.disabled,n=e.types,c=["button__btn"];return n&&n.map((function(e){return c.push("button__btn--".concat(e))})),Object(r.jsx)("div",{className:"button",children:Object(r.jsx)("button",{className:c.join(" "),type:"submit",disabled:a,children:t})})}),$e=(a(80),function(e){var t,a,n=e.additionalClass,c=e.valid,s=e.touched,i=e.tip,o=e.message,l=e.inputType,u=e.elementConfig,d=e.value,j=e.changed,b=e.labelEl,p=null,O=["input-field"];switch(n&&O.push(n),c&&s&&(O.push("invalid"),t=Object(r.jsx)("span",{children:o})),void 0!==i&&c&&s&&(a=Object(r.jsx)("span",{className:"input-tip",children:i})),l){case"input":case"email":case"password":p=Object(r.jsx)("input",Object(m.a)(Object(m.a)({className:"input-field__input"},u),{},{value:d,onChange:j}));break;case"textarea":p=Object(r.jsx)("textarea",Object(m.a)({},u))}return Object(r.jsxs)("div",{className:O.join(" "),children:[Object(r.jsx)("label",{className:"input-field__label",children:b}),p,t,a]})}),Ve=(a(81),Object(o.b)((function(e){return{cart:e.ic.cart,price:e.ic.totalPrice,token:e.auth.token,userId:e.auth.userId,postError:e.order.postError}}),(function(e){return{onOrderPost:function(t,a){return e(function(e,t){return{type:g,order:e,token:t}}(t,a))}}}))(Object(d.h)((function(e){var t=e.cart,a=e.token,c=e.history,s=e.postError,i=e.onOrderPost,o=Object(n.useState)({firstName:{elementType:"input",labelEl:"First name",additionalClass:"input-field--half",config:{type:"text",autoComplete:"given-name",name:"given-name"},value:"",validation:{required:!0,message:"Enter first name."},valid:!1,touched:!1},secondName:{elementType:"input",labelEl:"Second name",additionalClass:"input-field--half",config:{type:"text",autoComplete:"family-name",name:"family-name"},value:"",validation:{required:!0,message:"Enter second name."},valid:!1,touched:!1},phoneNumber:{elementType:"input",labelEl:"Phone number",additionalClass:"input-field--half",config:{type:"tel",autoComplete:"tel",name:"tel"},value:"",validation:{required:!0,regex:"tel",message:"Enter correct phone number."},valid:!1,touched:!1},email:{elementType:"email",labelEl:"E-mail",additionalClass:"input-field--half",config:{type:"email",autoComplete:"email",name:"email"},value:"",validation:{required:!0,regex:"email",message:"Enter correct e-mail address."},valid:!1,touched:!1},address:{elementType:"input",labelEl:"Shipping address",additionalClass:"input-field--half",config:{type:"text",autoComplete:"street-address",name:"street-address"},value:"",validation:{required:!0,message:"Enter shipping address."},valid:!1,touched:!1},city:{elementType:"input",labelEl:"City",additionalClass:"input-field--half",config:{type:"text",autoComplete:"address-level2",name:"address-level2"},value:"",validation:{required:!0,message:"Enter city."},valid:!1,touched:!1},postal:{elementType:"input",labelEl:"Postal code",additionalClass:"input-field--half",config:{type:"text",autoComplete:"postal-code",name:"postal-code",placeholder:"__-___"},value:"",validation:{required:!0,regex:"postal",maxLength:6,message:"Enter postal code.",tip:"Example: 01-000"},valid:!1,touched:!1}}),l=Object(ke.a)(o,2),u=l[0],d=l[1],j=Object(n.useState)(null),b=Object(ke.a)(j,2),p=b[0],O=b[1],h=Be(),x=h.formIsValid,f=h.inputChangedHandler;Object(n.useEffect)((function(){window.scroll({top:0,left:0,behavior:"smooth"}),0!==Object.getOwnPropertyNames(t).length&&null!==a||c.push("/")}),[t,a,c]),Object(n.useEffect)((function(){x&&null!==s&&(O(Object(r.jsx)("p",{className:"checkout-container__error",children:"Ouch! Something went wrong"})),window.scroll({top:0,left:0,behavior:"smooth"}))}),[x,s]);var v=[];for(var _ in u)v.push({id:_,options:u[_]});return Object(r.jsxs)("div",{className:"checkout-container",children:[p,Object(r.jsxs)("form",{className:"checkout-container__form",onSubmit:function(t){t.preventDefault(),function(){var e=Object(m.a)({},u);for(var t in e){var a=e[t];a.validation.required&&!a.touched&&(a.touched=!0),e[t]=a}d(e)}();var a=e.token,r={};for(var n in u)r[n]=u[n].value;var c={formData:r,cart:e.cart,price:e.price,date:new Date,userId:e.userId};x?i(c,a):window.scroll({top:0,left:0,behavior:"smooth"})},children:[v.map((function(e){return Object(r.jsx)($e,{inputType:e.options.elementType,labelEl:e.options.labelEl,elementConfig:e.options.config,additionalClass:e.options.additionalClass,value:e.options.value,valid:!e.options.valid,touched:e.options.touched,message:e.options.validation.message,tip:e.options.validation.tip,changed:function(t){return function(e,t){var a=f(u,e,t);d(a)}(t,e.id)}},e.id)})),Object(r.jsx)(We,{name:"Order Now!",types:["large","icon"]})]})]})})))),Ke=(a(82),Object(o.b)((function(e){return{icecreams:e.ic.icecreams,cart:e.ic.cart,token:e.auth.token,prices:e.ic.prices,fetchError:e.ic.fetchError}}),(function(e){return{onIcecreamInit:function(t){return e(function(e){return{type:p,token:e}}(t))},closeSummary:function(){return e({type:_})}}}))((function(e){var t=Object(n.useState)(!1),a=Object(ke.a)(t,2),c=a[0],s=a[1],i=Object(n.useState)(!0),o=Object(ke.a)(i,2),l=o[0],u=o[1],j=e.cart,b=e.token,m=e.history,p=e.onIcecreamInit,O=e.closeSummary,h=Object(n.useCallback)((function(){var e=0;for(var t in j){var a=j[t];for(var r in j[t]){e+=a[r]}}s(e>0)}),[j]);return Object(n.useEffect)((function(){b&&p(b),null===b&&m.push("/auth")}),[b,p,m]),Object(n.useEffect)((function(){h()}),[h]),Object(n.useEffect)((function(){O()}),[m.location.pathname,O]),Object(n.useEffect)((function(){"/"===m.location.pathname?u(!0):u(!1)}),[m.location.pathname]),Object(r.jsx)(n.Fragment,{children:Object(r.jsx)("div",{className:"products",children:Object(r.jsxs)("div",{className:"products__inner",children:[Object(r.jsx)("div",{className:"products__mask"}),Object(r.jsx)("div",{className:"products__content",children:Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{exact:!0,path:"/",render:function(){return Object(r.jsx)(ze,{purchasable:c,icecreams:e.icecreams,cart:e.cart,prices:e.prices,fetchError:e.fetchError})}}),Object(r.jsx)(d.b,{path:"/checkout",render:function(){return Object(r.jsx)(Ve,{purchasable:c})}})]})}),Object(r.jsx)("div",{className:"products__summary",children:Object(r.jsx)(Ye,{purchasable:c,pagePath:l})})]})})})}))),Ze=(a(83),function(e){return Object(r.jsxs)("div",{className:"thanks",children:[Object(r.jsx)("h1",{className:"thanks__headline",children:"Thank you for order!"}),Object(r.jsx)("p",{className:"thanks__desc",children:"Your order will be shipped as fast as possible"}),Object(r.jsx)("div",{className:"thanks__wrap",children:Object(r.jsx)(Te.a,{to:"/",className:"thanks__btn",children:"Go to Homepage"})})]})}),Xe=(a(84),Object(o.b)((function(e){return{loading:e.auth.loading,error:e.auth.error,isAuth:null!==e.auth.token}}),(function(e){return{onAuth:function(t,a,r){return e(function(e,t,a){return{type:S,email:e,pass:t,formType:a}}(t,a,r))}}}))((function(e){var t,a=Object(n.useState)({email:{elementType:"email",labelEl:"E-mail",additionalClass:"",config:{type:"email",name:"email"},value:"",validation:{required:!0,regex:"email"},valid:!1,touched:!1},password:{elementType:"password",labelEl:"Password",additionalClass:"",config:{type:"password",name:"password"},value:"",validation:{required:!0,minLength:6},valid:!1,touched:!1}}),c=Object(ke.a)(a,2),s=c[0],i=c[1],o=Object(n.useState)(!0),l=Object(ke.a)(o,2),u=l[0],j=l[1],b=Be(),m=b.formIsValid,p=b.inputChangedHandler,O=u?"Log in":"Sign Up",h=[],x=null;for(var f in s)h.push({id:f,options:s[f]});var v=h.map((function(e){return Object(r.jsx)($e,{inputType:e.options.elementType,labelEl:e.options.labelEl,elementConfig:e.options.config,additionalClass:e.options.additionalClass,value:e.options.value,valid:!e.options.valid,touched:e.options.touched,message:e.options.validation.message,tip:e.options.validation.tip,changed:function(t){return function(e,t){var a=p(s,e,t);i(a)}(t,e.id)}},e.id)}));return e.loading&&(v=Object(r.jsx)(Me,{})),e.error&&(x=function(e){switch(e){case"EMAIL_EXISTS":return"The email address is already in use by another account";case"EMAIL_NOT_FOUND":return"There is no user record corresponding to this identifier";case"USER_DISABLED":return"The user account has been disabled by an administrator";case"INVALID_PASSWORD":return"The password is invalid";case"TOO_MANY_ATTEMPTS_TRY_LATER":return"We have blocked all requests from this device due to unusual activity. Try again later";default:return e}}(e.error.message)),e.isAuth&&(t=Object(r.jsx)(d.a,{to:"/"})),Object(r.jsxs)("div",{className:"auth",children:[t,Object(r.jsx)("div",{className:"auth__header",children:Object(r.jsx)("img",{src:we,alt:"logo"})}),Object(r.jsxs)("div",{className:"auth__inner",children:[Object(r.jsx)("h1",{className:"auth__title",children:O}),x&&Object(r.jsx)("p",{className:"auth__message",children:x}),Object(r.jsxs)("form",{className:"auth__form",onSubmit:function(t){t.preventDefault(),e.onAuth(s.email.value,s.password.value,u)},children:[v,!e.loading&&Object(r.jsx)(We,{name:"Submit!",disabled:!m})]})]}),Object(r.jsx)("div",{className:"auth__footer",children:Object(r.jsxs)("span",{className:"auth__switch",onClick:function(e){e.preventDefault(),j(!u)},children:["Go to",u?" Register":" Log In"]})})]})}))),Je=(a(85),function(e){var t=e.data,a=t.price,n=t.date,c=t.formData,s=c.firstName,i=c.secondName,o=c.address,l=c.city,u=c.email,d=c.phoneNumber,j=c.postal,b=new Date(n),m=("0"+b.getDate()).slice(-2),p=("0"+(b.getMonth()+1)).slice(-2),O="".concat(m,".").concat(p,".").concat(b.getFullYear()," ").concat(b.getHours(),":").concat(b.getMinutes());return Object(r.jsxs)("div",{className:"s-order-box",children:[Object(r.jsxs)("div",{className:"s-order-box__date",children:["Order date: ",Object(r.jsx)("span",{children:O})]}),Object(r.jsxs)("div",{className:"s-order-box__content",children:[Object(r.jsxs)("p",{className:"s-order-box__text",children:["Price: ",Object(r.jsxs)("span",{children:[a,"$"]})]}),Object(r.jsxs)("p",{className:"s-order-box__text",children:["Name: ",Object(r.jsx)("span",{children:"".concat(s," ").concat(i)})]}),Object(r.jsxs)("p",{className:"s-order-box__text",children:["Address: ",Object(r.jsx)("span",{children:"".concat(o,", ").concat(j," ").concat(l)})]}),Object(r.jsxs)("p",{className:"s-order-box__text",children:["Email: ",Object(r.jsx)("span",{children:u})]}),Object(r.jsxs)("p",{className:"s-order-box__text",children:["Phone: ",Object(r.jsx)("span",{children:d})]})]})]})}),Qe=(a(86),Object(o.b)((function(e){return{token:e.auth.token,userId:e.auth.userId,userOrders:e.order.userOrders,loading:e.order.getLoading}}),(function(e){return{onOrderGet:function(t,a){return e(function(e,t){return{type:k,token:e,userId:t}}(t,a))}}}))((function(e){var t,a=e.token,c=e.userId,s=e.onOrderGet,i=e.userOrders,o=e.loading,l=Object.getOwnPropertyNames(i),u=Object(n.useCallback)((function(){s(a,c)}),[a,c,s]);(Object(n.useEffect)((function(){null!==a&&null!==c&&u()}),[a,c,u]),o&&(t=Object(r.jsx)(Me,{})),!o&&l.length>=1)&&(t=Object.values(i).map((function(e){return e})).sort((function(e,t){return new Date(t.date)-new Date(e.date)})).map((function(e){return Object(r.jsx)(Je,{data:e},e.date)})));return o||0!==l.length||(t=Object(r.jsx)("p",{children:"You do not have any order"})),Object(r.jsxs)("section",{className:"orders",children:[Object(r.jsxs)("div",{className:"orders__header",children:[Object(r.jsx)("h1",{className:"orders__title",children:"Orders"}),Object(r.jsx)("p",{className:"orders__desc",children:"Hello, there are you orders"})]}),Object(r.jsx)("div",{className:"orders__wrap",children:t})]})}))),et=Object(o.b)(null,(function(e){return{onLogout:function(){return e(re())}}}))((function(e){var t=e.onLogout;return Object(n.useEffect)((function(){t()}),[t]),Object(r.jsx)(d.a,{to:"/"})})),tt=(a(87),Object(o.b)((function(e){return{token:e.auth.token}}),(function(e){return{checkAuth:function(){return e({type:U})}}}))((function(e){var t=e.token,a=e.checkAuth;return Object(n.useEffect)((function(){a(),null===t&&b.push("/auth")})),Object(r.jsx)("div",{className:"app-container",children:Object(r.jsx)(De,{isAuth:t,children:Object(r.jsxs)(d.d,{children:[Object(r.jsx)(d.b,{path:"/thank-you",component:Ze}),Object(r.jsx)(d.b,{path:"/auth",component:Xe}),Object(r.jsx)(d.b,{path:"/orders",component:Qe}),Object(r.jsx)(d.b,{path:"/logout",component:et}),Object(r.jsx)(d.b,{path:"/",component:Ke})]})})})}))),at=(a(88),a(89),a(90),Object(u.a)()),rt=Object(l.c)({auth:H,ic:V,order:Z}),nt=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,ct=Object(l.e)(rt,nt(Object(l.a)(at)));at.run(ye),at.run(Ne),at.run(Ee);var st=Object(r.jsx)(o.a,{store:ct,children:Object(r.jsx)(d.c,{history:b,children:Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(tt,{})})})});i.a.render(st,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[91,1,2]]]);
//# sourceMappingURL=main.54a6efc1.chunk.js.map